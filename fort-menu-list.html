<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="fort-list.html">
<link rel="import" href="../iron-menu-behavior/iron-menu-behavior.html">

<dom-module id="fort-menu-list"
            attributes="zebra border double-border border-group show-filter filter-label filter-icon autofocus no-results-content">
  <template strip-whitespace>
    <style>
      :host {
        display: block;
        outline: none;
      }

      :host ::content fort-li {
        cursor: pointer;
      }

      /* add specificity to catch shady dom in polyserve */
      :host ::content fort-li:focus:before,
      :host ::content fort-li[focused]:before,
      :host ::content fort-li[focused]:focus:before {
        background: var(--fort-li-focus-color);
      }
    </style>

    <div class="selectable-content">
      <fort-list
        zebra$="[[zebra]]"
        border$="[[border]]"
        double-border$="[[doubleBorder]]"
        border-group$="[[borderGroup]]"
        show-filter$="[[showFilter]]"
        filter-label$="[[filterLabel]]"
        filter-icon$="[[filterIcon]]"
        autofocus$="[[autofocus]]"
        no-results-content$="[[noResultsContent]]"
      >
        <content select="fort-li,fort-list-group"></content>
      </fort-list>
    </div>
  </template>

  <script>
    Polymer(
      {
        is:         'fort-menu-list',
        properties: {
          selectable: {type: String, value: 'fort-li'}
        },

        keyBindings: {
          'enter': '_mutateEnterToTap'
        },

        _mutateEnterToTap: function (e)
                           {
                             e.detail.keyboardEvent.target.fire('tap');
                           },

        // override _activateHandler to prevent it from stopping propagation
        _activateHandler: function (event)
                          {
                            Polymer.IronSelectableBehavior._activateHandler.call(this, event);
                          },

        behaviors: [
          Polymer.IronMenuBehavior
        ]
      }
    );
  </script>
</dom-module>
